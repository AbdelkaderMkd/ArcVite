import{aC as s,aD as i,aF as _,aJ as $,b2 as C,aR as T,b5 as I,aK as E,oQ as M,oR as y,oV as b,f2 as m,oS as r,oW as k}from"./index-3572d442.js";let u=class extends ${constructor(e){super(e),this.tool=null,this._loggedUnsupportedErrorOnce=!1,this.logger=C.getLogger(this),(e==null?void 0:e.visible)!=null&&(this.visible=e.visible)}initialize(){this.addHandles(T(()=>({ready:this.view!=null&&this.view.ready,supported:this.supported}),({ready:e,supported:t})=>{!e||t||this._loggedUnsupportedErrorOnce||(this.logError(this.unsupportedErrorMessage),this._loggedUnsupportedErrorOnce=!0)},I))}destroy(){this.removeTool(),this.view=null}get active(){return this.tool!=null&&this.tool.active}get disabled(){return this.view==null||!this.view.ready||!this.supported}get supported(){return this.view==null||this.view.type===this.supportedViewType}get view(){return this._get("view")}set view(e){if(e===this.view)return;this.removeTool(),this._set("view",e);const t="tools";this.removeHandles(t),e!=null&&this.addHandles(e.tools.on("after-remove",d=>{d.item===this.tool&&this._set("tool",null)}),t)}set visible(e){this._set("visible",e),this.tool!=null&&(this.tool.visible=e)}createTool(e={interactive:!1}){if(this.removeTool(),this.view==null||!this.view.ready||!this.supported)return;const t=this.constructTool();t.created?(this._set("tool",t),this.view.tools.add(t)):e.interactive?(this._set("tool",t),this.view.addAndActivateTool(t),E(()=>t.created,()=>{t.active&&this.view!=null&&(this.view.activeTool=null)},{initial:!0,once:!0})):t.destroy()}removeTool(){var d;const e=this.tool;if(e==null)return;const t=(d=this.view)==null?void 0:d.tools;t!=null?t.remove(e):e.destroy(),this._set("tool",null)}logError(...e){this.logger.error(...e)}};s([i({constructOnly:!0})],u.prototype,"tool",void 0),s([i()],u.prototype,"active",null),s([i()],u.prototype,"disabled",null),s([i()],u.prototype,"supported",null),s([i({value:null})],u.prototype,"view",null),s([i({type:Boolean,value:!0})],u.prototype,"visible",null),u=s([_("esri.widgets.support.InteractiveToolViewModel")],u);const h="esri-unit-select",v={base:h,label:`${h}__label`,select:`${h}__select`};let p=class extends y{constructor(o,e){super(o,e),this._onSelectChange=t=>{this.onChange(t.target.value)}}loadDependencies(){return b({label:()=>m(()=>import("./calcite-label-86fe7ebd.js"),["assets/calcite-label-86fe7ebd.js","assets/index-3572d442.js","assets/index-0320859f.css"]),option:()=>m(()=>import("./calcite-option-40a14370.js"),["assets/calcite-option-40a14370.js","assets/index-3572d442.js","assets/index-0320859f.css"]),select:()=>m(()=>import("./calcite-select-f8f0d338.js"),["assets/calcite-select-f8f0d338.js","assets/index-3572d442.js","assets/index-0320859f.css"])})}render(){const{messages:o,options:e,selectLabel:t,value:d,_onSelectChange:w}=this;return r("div",{class:v.base,key:"units"},r("calcite-label",{class:v.label},t,r("calcite-select",{class:v.select,label:t,onCalciteSelectChange:w},e.map(c=>{var g;return r("calcite-option",{key:c,selected:c===d,value:c},k(c)?o.systems[c]:(g=o.units[c])==null?void 0:g.pluralCapitalized)}))))}};s([i()],p.prototype,"options",void 0),s([i()],p.prototype,"onChange",void 0),s([i()],p.prototype,"selectLabel",void 0),s([i()],p.prototype,"value",void 0),s([i(),M("esri/core/t9n/Units")],p.prototype,"messages",void 0),p=s([_("esri.widgets.support.UnitSelect")],p);const n="esri-measurement-widget-content",a={base:n,actions:`${n}__actions`,error:`${n}__error`,hint:`${n}__hint`,hintText:`${n}__hint-text`,panelError:`${n}__panel--error`,settings:`${n}__settings`,measurement:`${n}__measurement`,measurementItem:`${n}__measurement-item`,measurementItemDisabled:`${n}__measurement-item--disabled`,measurementItemTitle:`${n}__measurement-item__title`,measurementItemValue:`${n}__measurement-item__value`};let l=class extends y{constructor(o,e){super(o,e)}loadDependencies(){return b({button:()=>m(()=>import("./calcite-button-9298a056.js"),["assets/calcite-button-9298a056.js","assets/index-3572d442.js","assets/index-0320859f.css"])})}render(){return r("div",{class:a.base},this._renderContent())}_renderContent(){const{supported:o,active:e,state:t}=this;switch(t){case"disabled":case"ready":return o?e?this._renderHint():this._renderActions():this._renderUnsupportedMessage();case"measuring":case"measured":return[this._renderSettings(),this._renderMeasurement(),this._renderActions()]}}_renderUnsupportedMessage(){return r("section",{class:a.error,key:"unsupported"},r("p",null,this.messages.unsupported))}_renderHint(){const{messages:o}=this;return r("section",{class:a.hint,key:"hint"},r("p",{class:a.hintText},o.hint))}_renderSettings(){return r("div",{class:a.settings,key:"settings"},r(p,{options:this.unitOptions,selectLabel:this.messages.unit,value:this.unit,onChange:this.onUnitChange}))}_renderMeasurement(){return r("section",{class:a.measurement,key:"measurement"},this.measurementItems.map(o=>this._renderMeasurementItem(o)))}_renderMeasurementItem({key:o,title:e,value:t}){return r("div",{class:this.classes(a.measurementItem,t==null&&a.measurementItemDisabled),key:o},r("span",{class:a.measurementItemTitle},e),r("span",{"aria-live":"polite",class:a.measurementItemValue},t??this.messages.notApplicable))}_renderActions(){const{messages:o}=this;return r("div",{class:a.actions},r("calcite-button",{class:this.newMeasurementButtonClass,disabled:this.state==="disabled",onclick:this.onNewMeasurementClick},o.newMeasurement))}};s([i()],l.prototype,"active",void 0),s([i()],l.prototype,"measurementItems",void 0),s([i()],l.prototype,"messages",void 0),s([i()],l.prototype,"newMeasurementButtonClass",void 0),s([i()],l.prototype,"onNewMeasurementClick",void 0),s([i()],l.prototype,"onUnitChange",void 0),s([i()],l.prototype,"state",void 0),s([i()],l.prototype,"supported",void 0),s([i()],l.prototype,"unit",void 0),s([i()],l.prototype,"unitOptions",void 0),l=s([_("esri.widgets.support.MeasurementWidgetContent")],l);export{u as n,l as u};
