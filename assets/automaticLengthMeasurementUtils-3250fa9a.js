import{aN as Lt,aC as a,aD as c,aF as f,oS as o,zU as Ct,oR as S,oQ as ht,bi as A,tT as N,wf as ft,aR as F,bA as zt,oV as bt,f2 as z,zV as Et,zW as Vt,zX as Dt,zY as Ot,aJ as It,zZ as Rt,b5 as P,aH as mt,z_ as Nt,sc as Ft,oL as St,bI as At,nn as Pt,dw as Ht,de as V,fw as at,fx as vt,fz as Ut,bq as Wt,oN as Zt}from"./index-3572d442.js";import{t as qt}from"./memoize-3e55df82.js";import{T as lt,k as Kt,q as _t,x as Gt,F as jt,S as Xt,U as Yt}from"./quantityFormatUtils-90c350b0.js";import{k as Qt,i as C}from"./unitFormatUtils-0cfdbae8.js";import{f as wt,s as xt,m as E,z as Bt,Z as H,x as Jt}from"./euclideanLengthMeasurementUtils-b86505a9.js";import{geodesicLength as kt}from"./geometryEngine-e6870974.js";let w=class extends Lt.EventedAccessor{constructor(t){super(t),this._mode="feedback",this.helpMessage=void 0,this.viewType=void 0}get mode(){return this._mode}get allFields(){return[]}get editableFields(){return this.allFields.filter(t=>!t.readOnly)}enterInputMode(){this._mode="input",this.emit("focus")}exitInputMode(){this._mode="feedback"}unlockAllFields(){this.allFields.forEach(t=>t.unlock())}};a([c()],w.prototype,"tooltipOptions",void 0),a([c()],w.prototype,"_mode",void 0),a([c()],w.prototype,"mode",null),a([c()],w.prototype,"helpMessage",void 0),a([c()],w.prototype,"viewType",void 0),a([c()],w.prototype,"allFields",null),a([c()],w.prototype,"editableFields",null),w=a([f("esri.views.interactive.tooltip.SketchTooltipInfo")],w);const k="esri-tooltip",p=`${k}-content`,te=`${k}-content--input`,ee=`${k}-content__header`,ne=`${k}-table`,ie=`${k}-help-message`;function m({className:i,helpMessage:t,mode:e,onDiscard:n,onkeydown:s},...l){const r=l.flat(10).filter(d=>!!d);return o("div",{class:Ct(i,p,e==="input"&&te),onkeydown:s},e==="input"?o("div",{class:ee,key:"tooltip-content-header"},o("calcite-button",{appearance:"transparent",iconFlipRtl:"both",iconStart:"chevron-left",kind:"neutral",onclick:n,scale:"s",tabIndex:-1})):null,r.length>0?o("div",{class:ne},...r):null,t?o("div",{class:ie,key:"help-message"},t):null)}const D=`${k}-field`,O={base:D,inputMode:`${D}--input`,title:`${D}__title`,value:`${D}__value`};let u=class extends S{constructor(){super(...arguments),this.hidden=!1,this.mode="feedback"}render(){return o("div",{class:this.classes({[O.base]:!0,[O.inputMode]:this.mode==="input"})},o("div",{class:O.title},this.title),o("div",{class:O.value},this.value))}};a([c()],u.prototype,"hidden",void 0),a([c()],u.prototype,"mode",void 0),a([c()],u.prototype,"title",void 0),a([c()],u.prototype,"value",void 0),u=a([f("esri.views.interactive.tooltip.TooltipField")],u);const se={base:`${k}-value-by-value`};let x=class extends S{constructor(){super(...arguments),this.divider="Ã—"}render(){return o("div",{class:se.base},o("span",null,this.left),o("span",null,this.divider),o("span",null,this.right))}};a([c()],x.prototype,"left",void 0),a([c()],x.prototype,"divider",void 0),a([c()],x.prototype,"right",void 0),x=a([f("esri.views.interactive.tooltip.ValueByValue")],x);let h=class extends S{constructor(){super(...arguments),this._getFormatters=qt((t,e)=>({angle:n=>lt(n,n.rotationType),area:(n,s)=>Kt(t,n,s??e.area),length:(n,s,l)=>_t(t,n,s??e.length,l),relativeLength:(n,s)=>Gt(t,n,s??e.length),totalLength:(n,s)=>_t(t,n,s??e.length),verticalLength:(n,s)=>jt(t,n,s??e.length),relativeVerticalLength:(n,s)=>Xt(t,n,s??e.verticalLength),relativeOrientation:n=>A(n,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"}),percentage:n=>A(n.value,{style:"percent"}),scale:n=>A(n,{style:"percent",maximumFractionDigits:0})})),this._formatScale=t=>this._formatters.scale(t),this._formatRelativeOrientation=t=>this._formatters.relativeOrientation(t),this._formatLength=(t,e,n)=>this._formatters.length(t,e,n),this._formatRelativeLength=(t,e)=>this._formatters.relativeLength(t,e),this._formatVerticalLength=(t,e)=>this._formatters.verticalLength(t,e),this._formatRelativeVerticalLength=(t,e)=>this._formatters.relativeVerticalLength(t,e),this._formatArea=(t,e)=>this._formatters.area(t,e),this._formatPercentage=t=>this._formatters.percentage(t),this._onDiscard=()=>{this._exitInputMode()},this._onCommit=(t,e)=>{var d;if(e==="commit-and-exit")return this._exitInputMode();const n=this._getFocusableInputs(),s=n.length,l=n.indexOf(t);if(l===-1)return this._exitInputMode();const r=((l+(e==="commit-and-next"?1:-1))%s+s)%s;(d=n.at(r))==null||d.focus()},this._handleTab=t=>{if(t.code!==N.next)return;const e=this._getFocusableInputs();if(e.length===0)return;const n=e.at(0),s=e.at(-1);n&&s&&(t.shiftKey?document.activeElement===n&&(t.preventDefault(),s.focus()):document.activeElement===s&&(t.preventDefault(),n.focus()))}}get _displayUnits(){const t=ft(this.tooltip.view);return{length:t,verticalLength:t,area:t,angle:"degrees"}}get _inputUnitInfos(){const t=this._messagesUnits,e=y=>({unit:y,abbreviation:Qt(t,y,"abbr")}),n=ft(this.tooltip.view),s=Et(n),l=Vt(n),r=Dt(n),d="degrees";return{length:e(s),relativeLength:e(s),verticalLength:e(l),relativeVerticalLength:e(l),area:e(r),orientation:e(d),rotation:e(d)}}get _formatters(){return this._getFormatters(this._messagesUnits,this._displayUnits)}get fieldContext(){return{formatters:this._formatters,inputUnitInfos:this._inputUnitInfos,messages:this._messagesTooltip,onCommit:this._onCommit,onDiscard:this._onDiscard}}initialize(){let t=new AbortController;this.addHandles([F(()=>this.info.mode,e=>{this.tooltip.positionMode=e==="input"?"fixed":"follow-cursor"}),zt(()=>this.info,"focus",()=>{t==null||t.abort();const{signal:e}=t=new AbortController;requestAnimationFrame(()=>{var n;e.aborted||((n=this._getFocusableInputs().at(0))==null||n.focus())})})])}loadDependencies(){return bt({button:()=>z(()=>import("./calcite-button-9298a056.js"),["assets/calcite-button-9298a056.js","assets/index-3572d442.js","assets/index-0320859f.css"]),icon:()=>z(()=>import("./calcite-icon-2457ef0a.js"),["assets/calcite-icon-2457ef0a.js","assets/index-3572d442.js","assets/index-0320859f.css"]),input:()=>z(()=>import("./calcite-input-3e3766a0.js"),["assets/calcite-input-3e3766a0.js","assets/input-01d10848.js","assets/index-3572d442.js","assets/index-0320859f.css"])})}_getHelpMessage(t){var T,b,v,dt;const{info:e}=this,{tooltipOptions:n,helpMessage:s,viewType:l}=e,r=(T=n==null?void 0:n.visibleElements)==null?void 0:T.helpMessage,d=t??s,y=l==="3d"?"helpMessages3d":"helpMessages2d";return r&&d?(dt=(v=(b=this._messagesTooltip)==null?void 0:b.sketch)==null?void 0:v[y])==null?void 0:dt[d]:void 0}_exitInputMode(){this.info.exitInputMode(),document.querySelector(".esri-view-surface").focus()}_getFocusableInputs(){var t;return Array.from(((t=this.domNode)==null?void 0:t.querySelectorAll("input:not([disabled])"))??[])}};a([ht("esri/core/t9n/Units"),c()],h.prototype,"_messagesUnits",void 0),a([ht("esri/views/interactive/tooltip/t9n/Tooltip"),c()],h.prototype,"_messagesTooltip",void 0),a([c()],h.prototype,"info",void 0),a([c()],h.prototype,"tooltip",void 0),a([c()],h.prototype,"_displayUnits",null),a([c()],h.prototype,"_inputUnitInfos",null),a([c()],h.prototype,"_formatters",null),a([c()],h.prototype,"fieldContext",null),h=a([f("esri.views.interactive.tooltip.content.TooltipContent")],h);const oe={base:`${p} ${`${p}--draw-rectangle`}`};let U=class extends h{render(){const{area:t,radius:e,xSize:n,ySize:s,tooltipOptions:l}=this.info,{visibleElements:r}=l,d=this._messagesTooltip.sketch;return o(m,{className:oe.base,helpMessage:this._getHelpMessage()},r.radius&&e!=null?o(u,{title:d.radius,value:this._formatLength(e)}):null,r.size&&n!=null&&s!=null?o(u,{title:d.size,value:o(x,{left:this._formatLength(n),right:this._formatLength(s)})}):null,r.area?o(u,{title:d.area,value:this._formatArea(t)}):null)}};U=a([f("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],U);const ae={base:`${p}--draw-mesh`};let W=class extends h{render(){const{elevation:t,tooltipOptions:e}=this.info,{visibleElements:n}=e,s=this._messagesTooltip.sketch;return o(m,{className:ae.base,helpMessage:this._getHelpMessage()},n.elevation?o(u,{title:s.elevation,value:this._formatVerticalLength(t.actual)}):null)}};W=a([f("esri.views.interactive.tooltip.content.TooltipContentDrawMesh")],W);const _=`${k}-editable-field`,g={base:_,inputMode:`${_}--input`,locked:`${_}--locked`,title:`${_}__title`,titleContent:`${_}__title__content`,value:`${_}__value`,valueContent:`${_}__value__content`,input:`${_}__input`,inputDisabled:`${_}__input--disabled`,inputReadOnly:`${_}__input--read-only`,inputSuffix:`${_}__input-suffix`,button:`${_}__button`};let $=class extends S{constructor(){super(...arguments),this._input=null,this._afterInputCreate=t=>{this._input=t},this._selectText=()=>{requestAnimationFrame(()=>{var t;(t=this._input)==null||t.select()})},this._onKeyDown=t=>{t.key===N.discard&&this._discard()},this._onInputKeyDown=t=>{switch(t.key){case N.commit:return this._commit({type:"commit-and-exit",allowLockingCurrentValue:!0});case N.next:return t.stopPropagation(),this._commit({type:t.shiftKey?"commit-and-previous":"commit-and-next",allowLockingCurrentValue:!1})}},this._onInput=t=>{this.field.inputValue=t.target.value},this._onLockClick=()=>{const{field:t}=this;t.locked?t.unlock():this._lock()}}loadDependencies(){return bt({button:()=>z(()=>import("./calcite-button-9298a056.js"),["assets/calcite-button-9298a056.js","assets/index-3572d442.js","assets/index-0320859f.css"]),icon:()=>z(()=>import("./calcite-icon-2457ef0a.js"),["assets/calcite-icon-2457ef0a.js","assets/index-3572d442.js","assets/index-0320859f.css"])})}render(){const{mode:t,field:e}=this,n=t==="input",{locked:s}=e;return o("div",{class:this.classes({[g.base]:!0,[g.inputMode]:t==="input",[g.locked]:s})},o("div",{class:g.title,key:"title"},o("div",{class:g.titleContent,key:"title-content"},this._title,s&&!n?o("calcite-icon",{icon:"lock",key:"icon",scale:"s"}):null)),o("div",{class:g.value,key:"value"},n?this._renderInput():o("span",{key:"formatted-value"},this._feedbackValue)))}get _initialValue(){const{field:t}=this;return t.actual!=null?t.toInputUnits(t.actual,this.context).value:null}get _feedbackValue(){const{context:t,field:e}=this,{actual:n,committed:s,format:l}=e;return s!=null?l(s,t):n!=null?l(n,t):""}get _displayValue(){const{field:t}=this,{inputValue:e,committed:n}=t;return e??(n!=null?this._toString(t.toInputUnits(n,this.context).value):this._toString(this._initialValue))}get _suffix(){const{suffix:t}=this.field;return typeof t=="string"?t:t(this.context)}get _title(){const{title:t}=this.field;return typeof t=="string"?t:t(this.context)}_renderInput(){const{disabled:t,locked:e,readOnly:n}=this.field;return o("div",{class:g.valueContent,key:"input-container",onkeydown:this._onKeyDown},o("input",{afterCreate:this._afterInputCreate,class:this.classes({[g.input]:!0,[g.inputDisabled]:t,[g.inputReadOnly]:n}),disabled:t||n,onfocus:this._selectText,oninput:this._onInput,onkeydown:this._onInputKeyDown,readOnly:n,type:"text",value:this._displayValue}),o("div",{class:g.inputSuffix,key:"suffix"},this._suffix),n?void 0:o("calcite-button",{appearance:"transparent",class:g.button,disabled:t,iconStart:e?"lock":"unlock",kind:"neutral",onclick:this._onLockClick,scale:"s",tabIndex:-1}))}_commit({type:t,allowLockingCurrentValue:e}){const{_input:n,field:s}=this;n&&(s.locked&&s.inputValue===""?s.unlock():(e||s.inputValue!=null)&&this._lock(),this.context.onCommit(n,t))}_discard(){this._input&&(this.field.inputValue=null,this.context.onDiscard(this._input))}_lock(){const{field:t}=this,e=this._parseNumber(t.inputValue),n=e!=null?t.createQuantity(e,this.context):null;t.lock(n)}_parseNumber(t){if(t==null)return null;const e=parseFloat(t);return isNaN(e)||!isFinite(e)?null:e}_toString(t){return t!=null?t.toFixed(3):"0"}};a([c()],$.prototype,"field",void 0),a([c()],$.prototype,"context",void 0),a([c()],$.prototype,"mode",void 0),a([c()],$.prototype,"_initialValue",null),a([c()],$.prototype,"_feedbackValue",null),a([c()],$.prototype,"_input",void 0),a([c()],$.prototype,"_displayValue",null),a([c()],$.prototype,"_suffix",null),a([c()],$.prototype,"_title",null),$=a([f("esri.views.interactive.tooltip.TooltipEditableField")],$);function rt(i){const t=i.fields.filter(e=>e!=null&&!e.hidden);return t.length===0?null:o(Ot,null,t.map(e=>o($,{context:i.context,field:e,key:e.id,mode:i.mode})))}const le={base:`${p}--draw-point`};let Z=class extends h{render(){const{fieldContext:t,info:e}=this,{mode:n,elevation:s,tooltipOptions:l}=e,{visibleElements:r}=l;return o(m,{className:le.base,helpMessage:this._getHelpMessage(),mode:n,onkeydown:this._handleTab,onDiscard:this._onDiscard},o(rt,{context:t,fields:[r.elevation?s:void 0],mode:n}))}};Z=a([f("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],Z);const re={base:`${p} ${`${p}--draw-polygon`}`};let q=class extends h{render(){const{fieldContext:t,info:e}=this,{area:n,distance:s,elevation:l,mode:r,orientation:d,tooltipOptions:y,viewType:T}=e,{inputEnabled:b,visibleElements:v}=y;return o(m,{className:re.base,helpMessage:this._getHelpMessage(),mode:r,onkeydown:this._handleTab,onDiscard:this._onDiscard},o(rt,{context:t,fields:[b&&v.orientation?d:void 0,b&&v.distance?s:void 0,v.elevation&&T!=="2d"?l:void 0,v.area?n:void 0],mode:r}))}};q=a([f("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],q);const ce={base:`${p} ${`${p}--draw-polyline`}`};let K=class extends h{render(){const{fieldContext:t,info:e}=this,{distance:n,elevation:s,mode:l,orientation:r,tooltipOptions:d,totalLength:y,viewType:T}=e,{inputEnabled:b,visibleElements:v}=d;return o(m,{className:ce.base,helpMessage:this._getHelpMessage(),mode:l,onkeydown:this._handleTab,onDiscard:this._onDiscard},o(rt,{context:t,fields:[b&&v.orientation?r:void 0,b&&v.distance?n:void 0,v.elevation&&T!=="2d"?s:void 0,v.totalLength?y:void 0],mode:l}))}};K=a([f("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],K);const ue={base:`${p} ${`${p}--draw-rectangle`}`};let G=class extends h{render(){const{area:t,xSize:e,ySize:n,tooltipOptions:s}=this.info,{visibleElements:l}=s,r=this._messagesTooltip.sketch;return o(m,{className:ue.base,helpMessage:this._getHelpMessage()},l.size&&e!=null&&n!=null?o(u,{title:r.size,value:o(x,{left:this._formatLength(e),right:this._formatLength(n)})}):null,l.area?o(u,{title:r.area,value:this._formatArea(t)}):null)}};G=a([f("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],G);const pe={base:`${p} ${`${p}--extent-rotate`}`};let j=class extends h{render(){const{angle:t,tooltipOptions:e}=this.info,{visibleElements:n}=e,s=this._messagesTooltip.sketch;return o(m,{className:pe.base,helpMessage:this._getHelpMessage()},n.rotation?o(u,{title:s.rotation,value:this._formatRelativeOrientation(t)}):null)}};j=a([f("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],j);const de={base:`${p} ${`${p}--extent-scale`}`};let X=class extends h{render(){const t=this.info,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return o(m,{className:de.base,helpMessage:this._getHelpMessage()},e.size?o(u,{title:n.size,value:o(x,{left:this._formatLength(t.xSize),right:this._formatLength(t.ySize)})}):null,e.scale?o(u,{title:n.scale,value:o(x,{left:this._formatScale(t.xScale),right:this._formatScale(t.yScale)})}):null)}};X=a([f("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],X);const he={base:`${p} ${`${p}--reshape-edge-offset`}`};let Y=class extends h{render(){const{area:t,distance:e,totalLength:n,tooltipOptions:s}=this.info,{visibleElements:l}=s,r=this._messagesTooltip.sketch;return o(m,{className:he.base,helpMessage:this._getHelpMessage()},l.distance?o(u,{title:r.distance,value:this._formatRelativeLength(e)}):null,l.area&&t!=null?o(u,{title:r.area,value:this._formatArea(t)}):null,l.totalLength&&n!=null?o(u,{title:r.totalLength,value:this._formatLength(n)}):null)}};Y=a([f("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],Y);const fe={base:`${p} ${`${p}--transform-absolute`}`};let Q=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return o(m,{className:fe.base,helpMessage:this._getHelpMessage()},e.orientation&&t.orientation!=null?o(u,{key:"orientation",title:n.orientation,value:lt(t.orientation,t.rotationType,t.orientationPrecision)}):null,e.size&&t.size!=null?o(u,{key:"size",title:n.size,value:this._formatLength(t.size,t.sizeUnit,t.sizePrecision)}):null)}};Q=a([f("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],Q);const me={base:`${p} ${`${p}--transform-rotate`}`};let B=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return o(m,{className:me.base,helpMessage:this._getHelpMessage()},e.rotation&&t.rotation!=null?o(u,{key:"rotation",title:n.rotation,value:Yt(t.rotation,t.rotationType,t.rotationPrecision)}):null,e.orientation&&t.orientation!=null?o(u,{key:"orientation",title:n.orientation,value:lt(t.orientation,t.rotationType,t.orientationPrecision)}):null)}};B=a([f("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],B);const ve={base:`${p} ${`${p}--transform-scale`}`};let J=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return o(m,{className:ve.base,helpMessage:this._getHelpMessage()},e.scale&&t.scale!=null?o(u,{key:"scale",title:n.scale,value:this._formatPercentage(t.scale)}):null,e.size&&t.size!=null?o(u,{key:"size",title:n.size,value:this._formatLength(t.size,t.sizeUnit,t.sizePrecision)}):null)}};J=a([f("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],J);const _e={base:`${p} ${`${p}--translate-graphic`}`};let tt=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return o(m,{className:_e.base,helpMessage:this._getHelpMessage()},e.distance?o(u,{title:n.distance,value:this._formatLength(t.distance)}):null)}};tt=a([f("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphic")],tt);const ge={base:`${p} ${`${p}--translate-graphic-xy`}`};let et=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return o(m,{className:ge.base,helpMessage:this._getHelpMessage()},e.distance?o(u,{title:n.distance,value:this._formatRelativeLength(t.distance)}):null)}};et=a([f("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicXY")],et);const $e={base:`${p} ${`${p}--translate-graphic-z`}`};let nt=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return o(m,{className:$e.base,helpMessage:this._getHelpMessage()},e.distance?o(u,{title:n.distance,value:this._formatRelativeVerticalLength(t.distance)}):null)}};nt=a([f("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicZ")],nt);const ye={base:`${p} ${`${p}--translate-vertex`}`};let it=class extends h{render(){const{distance:t,elevation:e,area:n,totalLength:s,tooltipOptions:l}=this.info,{visibleElements:r}=l,d=this._messagesTooltip.sketch;return o(m,{className:ye.base,helpMessage:this._getHelpMessage()},r.distance?o(u,{title:d.distance,value:this._formatLength(t)}):null,r.elevation&&e!=null?o(u,{title:d.elevation,value:this._formatVerticalLength(e.actual)}):null,r.area&&n!=null?o(u,{title:d.area,value:this._formatArea(n)}):null,r.totalLength&&s!=null?o(u,{title:d.totalLength,value:this._formatLength(s)}):null)}};it=a([f("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],it);const be={base:`${p} ${`${p}--translate-vertex`}`};let st=class extends h{render(){const{area:i,distance:t,elevation:e,totalLength:n,tooltipOptions:s}=this.info,{visibleElements:l}=s,r=this._messagesTooltip.sketch;return o(m,{className:be.base,helpMessage:this._getHelpMessage()},l.distance?o(u,{title:r.distance,value:this._formatRelativeLength(t)}):null,l.elevation&&e!=null?o(u,{title:r.elevation,value:this._formatVerticalLength(e.actual)}):null,l.area&&i!=null?o(u,{title:r.area,value:this._formatArea(i)}):null,l.totalLength&&n!=null?o(u,{title:r.totalLength,value:this._formatLength(n)}):null)}};st=a([f("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexXY")],st);const we={base:`${p} ${`${p}--translate-vertex`}`};let ot=class extends h{render(){const{distance:t,elevation:e,tooltipOptions:n}=this.info,{visibleElements:s}=n,l=this._messagesTooltip.sketch;return o(m,{className:we.base,helpMessage:this._getHelpMessage()},s.distance?o(u,{title:l.distance,value:this._formatRelativeVerticalLength(t)}):null,s.elevation&&e!=null?o(u,{title:l.elevation,value:this._formatVerticalLength(e.actual)}):null)}};ot=a([f("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexZ")],ot);function xe(i,t){if(t==null)return null;const e=document.createElement("div");switch(t.type){case"draw-point":return new Z({tooltip:i,info:t,container:e});case"draw-polygon":return new q({tooltip:i,info:t,container:e});case"draw-polyline":return new K({tooltip:i,info:t,container:e});case"draw-mesh":return new W({tooltip:i,info:t,container:e});case"draw-rectangle":return new G({tooltip:i,info:t,container:e});case"draw-circle":return new U({tooltip:i,info:t,container:e});case"extent-rotate":return new j({tooltip:i,info:t,container:e});case"extent-scale":return new X({tooltip:i,info:t,container:e});case"transform-absolute":return new Q({tooltip:i,info:t,container:e});case"transform-rotate":return new B({tooltip:i,info:t,container:e});case"transform-scale":return new J({tooltip:i,info:t,container:e});case"translate-graphic":return new tt({tooltip:i,info:t,container:e});case"translate-graphic-z":return new nt({tooltip:i,info:t,container:e});case"translate-graphic-xy":return new et({tooltip:i,info:t,container:e});case"translate-vertex":return new it({tooltip:i,info:t,container:e});case"translate-vertex-z":return new ot({tooltip:i,info:t,container:e});case"translate-vertex-xy":return new st({tooltip:i,info:t,container:e});case"reshape-edge-offset":return new Y({tooltip:i,info:t,container:e})}}const ke={base:`${k}`};let M=class extends It{constructor(t){super(t),this.info=null,this.positionMode="follow-cursor",this._contentContainer=(()=>{const e=document.createElement("div");return e.classList.add(ke.base),Rt(e),e})(),this._contentWidget=null}initialize(){const t=this._contentContainer;this.addHandles([F(()=>{var e;return(e=this.view.overlay)==null?void 0:e.surface},e=>{t.remove(),e==null||e.appendChild(t)},P),F(()=>this.info,(e,n)=>{if(this._contentWidget!=null&&e!=null&&n!=null&&e.type===n.type)this._contentWidget.info=e;else{this._contentWidget=mt(this._contentWidget);const s=xe(this,e);s&&(this._contentWidget=s,s.container&&t.appendChild(s.container))}},P),F(()=>({container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:this._screenPoint,positionMode:this.positionMode}),Te,P)])}destroy(){this._contentWidget=mt(this._contentWidget),this._contentContainer.remove()}clear(){this.info=null}get _screenPoint(){const t=this.view.inputManager;return t!=null&&t.multiTouchActive?null:t==null?void 0:t.latestPointerLocation}get test(){var t;return{contentContainer:this._contentContainer,visible:((t=this._contentContainer)==null?void 0:t.style.display)!=="none"}}};function Te({container:i,contentWidget:t,screenPoint:e,positionMode:n}){const{style:s}=i;if(n==="docked")return s.display="block",void(s.transform="none");if(n!=="fixed")if(e!=null&&t!=null){s.display="block";const l=Nt(i),r=`translate(${Math.round(e.x)+gt[0]*(l?-1:1)}px, ${Math.round(e.y)+gt[1]}px)`;s.transform=l?`translate(-100%, 0) ${r}`:r}else s.display="none"}a([c({nonNullable:!0})],M.prototype,"view",void 0),a([c()],M.prototype,"info",void 0),a([c()],M.prototype,"positionMode",void 0),a([c()],M.prototype,"_contentContainer",void 0),a([c()],M.prototype,"_contentWidget",void 0),a([c()],M.prototype,"_screenPoint",null),M=a([f("esri.views.interactive.tooltip.Tooltip")],M);const gt=[20,20];function Tt(i,t,e,n,...s){return Ft(i)&&St(i)?t.apply(void 0,s):At(i)?e.apply(void 0,s):n.apply(void 0,s)}function Me({hasZ:i,spatialReference:t,paths:e},n,s=0){const l=Pt(t);if(l==null)return!1;const r=i?d=>d:d=>Ht(Le,d[0],d[1],s);for(const d of e){const y=[];for(const T of d){const b=[0,0,s];l(r(T),0,b,0),y.push(b)}n.push(y)}return!0}const Le=V();function Mt(i){const{spatialReference:t}=i;return Tt(t,Ve,De,Oe,i)}function ct(i,t){if(!Wt(i.spatialReference,t.spatialReference))return null;const{spatialReference:e}=i;return I[0]=i.x,I[1]=i.y,I[2]=i.hasZ?i.z:0,R[0]=t.x,R[1]=t.y,R[2]=t.hasZ?t.z:0,ut(I,R,e)}function ut(i,t,e){return Tt(e,Ce,ze,Ee,i,t,e)}function Ce(i,t,e){return C(at(pt,i,t,e).distance,"meters")}function ze(i,t,e){return C(kt(Ie(i,t,e),"meters"),"meters")}function Ee(i,t,e){return vt(i,e,$t)&&vt(t,e,yt)?C(at(pt,$t,yt).distance,"meters"):null}function Ve(i){return C(Zt([i],"meters")[0],"meters")}function De(i){return C(kt(i,"meters"),"meters")}function Oe(i){const t=[];if(!Me(i,t))return null;let e=0;for(const n of t){let s=0;for(let l=1;l<n.length;++l)s+=at(pt,n[l-1],n[l]).distance;e+=s}return C(e,"meters")}function Ie(i,t,e){return{type:"polyline",spatialReference:e,paths:[[[...i],[...t]]]}}const pt=new Ut,I=V(),R=V(),$t=V(),yt=V();function pn(i,t){return L(xt,Mt,wt,t,i)}function dn(i,t,e){return L(Bt,ct,E,e,i,t)}function hn(i,t,e,n){return L(Jt,ut,H,n,i,t,e)}function fn(i,t,e){return L(E,ct,E,e,i,t)}function mn(i,t,e,n){return L(H,ut,H,n,i,t,e)}function vn(i){return L(xt,Mt,wt,"on-the-ground",i)}function _n(i,t){return L(E,ct,E,"on-the-ground",i,t)}function L(i,t,e,n,...s){if(n==="on-the-ground"){const l=t.apply(void 0,s);return l??e.apply(void 0,s)}return i.apply(void 0,s)}export{fn as a,ut as b,mn as c,dn as d,vn as g,hn as l,_n as m,pn as p,Tt as r,w as s,M as u};
